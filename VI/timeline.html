<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="../assets/images/main/logo.webp" type="image/webp">
    <link rel="stylesheet" href="../assets/styles/styles.css">
    <link rel="stylesheet" href="../assets/styles/styles_VI.css">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" />
    <title>Línea de tiempo - VI</title>
</head>

<body class="gta-vi timeline">
    <header>
        <div class="logo-container">
            <a href="../index.html">
                <img src="../assets/images/main/logo.webp" alt="Vice Club Logo">
            </a>
            <h1>VICE CLUB</h1>
        </div>
        <nav>
            <button id="hamburger" aria-label="Abrir menú">
                <span class="line"></span>
                <span class="line"></span>
                <span class="line"></span>
            </button>
        </nav>
    </header>
    <div class="block timeline">
        <div class="text-container" id="timelineContainer">
        </div>
    </div>
    <div class="timeline-arrow" id="arrowButton">
        <span class="material-symbols-rounded">south</span>
    </div>

    <div id="rightContent">
        <div class="right-content-logos">
            <a href="../III/inicio.html">
                <img src="../assets/images/main/III.webp" alt="Logo de GTA 3" loading="lazy">
            </a>
            <a href="../VC/inicio.html">
                <img src="../assets/images/main/VC.webp" alt="Logo de GTA Vice City" loading="lazy">
            </a>
            <a href="../SA/inicio.html">
                <img src="../assets/images/main/SA.webp" alt="Logo de GTA San Andreas" loading="lazy">
            </a>
            <a href="../LCS/inicio.html">
                <img src="../assets/images/main/LCS.webp" alt="Logo de GTA Liberty City Stories" loading="lazy">
            </a>
            <a href="../VCS/inicio.html">
                <img src="../assets/images/main/VCS.webp" alt="Logo de GTA Vice City Stories" loading="lazy">
            </a>
            <a href="../IV/inicio.html">
                <img src="../assets/images/main/IV.webp" alt="Logo de GTA 4" loading="lazy">
            </a>
            <a href="../V/inicio.html">
                <img src="../assets/images/main/V.webp" alt="Logo de GTA 5" loading="lazy">
            </a>
            <a href="#" class="active">
                <img src="../assets/images/main/VI.webp" alt="Logo de GTA 6" loading="lazy" class="active">
            </a>
        </div>
        <nav class="right-content-nav">
            <div class="right-content-links">
                <a href="inicio.html">INICIO</a>
                <a href="#" class="active">LÍNEA DE TIEMPO</a>
            </div>
        </nav>
    </div>

    <div id="imageOverlay">
        <span class="material-symbols-rounded close-btn" id="closeBtn">
            close_small
        </span>
        <div class="image-wrapper">
            <img src="" alt="Imagen ampliada" id="overlayImg">
            <div class="overlay-footer">
                <p id="overlayFooterText"></p>
            </div>
        </div>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const button = document.getElementById("hamburger");
            const rightContent = document.getElementById("rightContent");
            const block = document.querySelector(".block");

            button.addEventListener("click", function (event) {
                event.stopPropagation();
                rightContent.classList.toggle("show");
                button.classList.toggle("active");

                if (block) block.classList.toggle("menu-shift");
            });

            document.addEventListener("click", function (event) {
                if (!rightContent.contains(event.target) && !button.contains(event.target)) {
                    rightContent.classList.remove("show");
                    button.classList.remove("active");

                    if (block) block.classList.remove("menu-shift");
                }
            });
        });
    </script>
    <script>
        async function loadTimeline() {
            try {
                const response = await fetch('https://viceclub.s3.us-east-1.amazonaws.com/VI/timeline.json?t=' + Date.now());
                const data = await response.json();
                const container = document.getElementById('timelineContainer');

                let lastYear = null;

                container.innerHTML = `
                    <h2>${data.title}</h2>
                    <div class="timeline-last-updated">${data.lastUpdated}</div>
                `;

                data.entries.forEach(entry => {
                    const [day, month, year] = entry.date.split('/');

                    if (lastYear && lastYear !== year) {
                        const divider = document.createElement('div');
                        divider.classList.add('timeline-divider');
                        container.appendChild(divider);
                    }
                    lastYear = year;

                    if (entry.events && Array.isArray(entry.events)) {
                        entry.events.forEach((ev, i) => {
                            const article = document.createElement('article');

                            article.innerHTML = `
                            ${i === 0 ? `<h3 class="timeline-date">${entry.date}</h3>` : ''}
                            <h4 class="timeline-time">${ev.time}</h4>
                            <p>
                                <span class="material-symbols-rounded timeline-icon">
                                timeline
                                </span>
                                ${ev.text}
                            </p>
                            ${ev.image ? `<img src="${ev.image}" class="news-image" loading="lazy" data-footer="${ev.footerText || ''}">` : ''}
                        `;
                            container.appendChild(article);
                        });
                    }

                    else {
                        const article = document.createElement('article');
                        article.innerHTML = `
                    <h3 class="timeline-date">${entry.date}</h3>
                    <h4 class="timeline-time">${entry.time}</h4>
                    <p>
                        <span class="material-symbols-rounded timeline-icon">
                        timeline
                        </span>
                        ${entry.text}
                    </p>
                        ${entry.image ? `<img src="${entry.image}" class="news-image" loading="lazy" data-footer="${entry.footerText || ''}">` : ''}
                `;
                        container.appendChild(article);
                    }
                });
            } catch (error) {
                console.error("Error al cargar el JSON:", error);
            }
        }
        loadTimeline().then(() => {
            const arrowButton = document.getElementById("arrowButton");
            const articles = document.querySelectorAll("article");
            const lastArticle = articles[articles.length - 1];

            arrowButton.addEventListener("click", () => {
                lastArticle.scrollIntoView();
            });

            window.addEventListener("scroll", () => {
                const currentScroll = window.scrollY;
                const lastArticleTop = lastArticle.offsetTop;

                if (currentScroll >= lastArticleTop - 700) {
                    arrowButton.classList.add("hidden");
                } else {
                    arrowButton.classList.remove("hidden");
                }
            });
        });
    </script>
    <script src="../assets/scripts/overlay.js"></script>
</body>

</html>